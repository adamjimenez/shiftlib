function debug(e){void 0!==window.console&&console.log(e)}function remove_options(e){return jQuery("option:not(:first-child)",e).remove(),e.disabled=!0,!0}function add_options(result,target_option,value){models=eval("("+result+")");var mod=target_option,selectedIndex=0;if(models){for(i=0;i<models.length;i++)mod.options[i+1]=new Option(models[i],i,!0,!0),models[i].replace(/-/,"").toLowerCase()===value.replace(/-/,"").toLowerCase()&&(selectedIndex=i+1);mod.options[0].value="",mod.options[0].text="",mod.disabled=!1}else optval="",opttext="Not Applicable",mod.options[0]=new Option(opttext,optval,!0,!0);mod.options.selectedIndex=selectedIndex}function showProgress(e){if(jQuery.dialog)if(e){var t=jQuery("#progressDialog");0===jQuery("#progressDialog").length&&(t=jQuery('<div id="progressDialog" title="Loading">Please wait..</div>').appendTo("body")),jQuery("#progressDialog").dialog({closeOnEscape:!1,open:function(){jQuery(this).parent().children().children(".ui-dialog-titlebar-close").hide()},height:140,modal:!0})}else jQuery("#progressDialog").dialog("close")}function initForms(){function e(e,t){geocoder.geocode({address:e},function(e,i){i==google.maps.GeocoderStatus.OK?(n[t].setCenter(e[0].geometry.location),n[t].markers[0].setPosition(e[0].geometry.location)):console.log("Geocode was not successful for the following reason: "+i)})}if(jQuery("form.validate").bind("submit",function(e){e.preventDefault(),e.stopPropagation(),showProgress(!0),jQuery("*[type=submit], *[type=image]",this).attr("disabled",""),jQuery("div.error").remove();var t=location.href;this.action&&(t=this.action),jQuery.ajax(t,{dataType:"json",type:"post",data:jQuery(this).serializeAll()+"&validate=1&nospam=1",success:jQuery.proxy(function(e){var t,n="inline";if(jQuery(this).attr("data-errorMethod")?n=jQuery(this).attr("data-errorMethod"):jQuery(this).attr("errorMethod")&&(n=jQuery(this).attr("errorMethod")),debug(e),showProgress(!1),parseInt(e,10)!==e-0){if(e.length>0){var a="";for(i=0;i<e.length;i++){var r,o,s=e[i].indexOf(" ");-1===s?(r=e[i],o="Required"):(r=e[i].substring(0,s),o=e[i].substring(s+1));var l="";this[r]?(this[r].style?(t||(t=r),l=this[r].parentNode):this[r][0]&&(l=this[r][0].parentNode.parentNode),a+=r+"\n"):this[r+"[]"]?(this[r+"[]"].style?(t||(t=r),l=this[r+"[]"].parentNode):this[r+"[]"][0]&&(l=this[r+"[]"][0].parentNode.parentNode),a+=r+"\n"):(a+=o+"\n",debug("field not found: "+r)),l&&"inline"==n&&(div=document.createElement("div"),div.innerHTML=o,div.style.color="red",div.className="error",l.appendChild(div))}"alert"==n&&alert("Please check the required fields\n"+a);var d,c;if(c=this[t])for(;c=c.parentNode;){if("none"==c.style.display){d=c.id;break}if("BODY"==c.nodeName)break}d&&set_tab&&(debug("switch tab: "+d),set_tab(d)),$(this).find("[name="+e[0]+"]:first").focus()}jQuery("*[type=submit], *[type=image]",this).removeAttr("disabled")}else window.onbeforeunload=null,$(this).append('<input type="hidden" name="nospam" value="1">'),this.submit()},this)})}),jQuery("textarea.autogrow").bind("keyup",function(){this.style.overflow="hidden",this.style.fontSize="12px";var e=this.cols,t=this.value;t=t.replace(/\r\n?/,"\n");var n=2,a=0;for(i=0;i<t.length;i++){var r=t.charAt(i);a++,("\n"==r||a==e)&&(n++,a=0)}this.rows>n&&(n=this.rows),this.style.height=14*n+"px"}),jQuery("textarea.autogrow").trigger("keyup"),jQuery("select.combobox").length){jQuery("head").append("<link>");var t=jQuery("head").children(":last");t.attr({rel:"stylesheet",type:"text/css",href:"/_lib/js/jquery.ui.combobox/jquery.ui.combobox.css"}),jQuery.getScript("/_lib/js/jquery.ui.combobox/jquery.ui.combobox.js").done(function(){jQuery("select.combobox").combobox()})}if(jQuery().datepicker&&(jQuery("input[data-type='date']").datepicker({dateFormat:"dd/mm/yy",altFormat:"dd/mm/yy"}),jQuery("input[data-type='dob']").datepicker({dateFormat:"dd/mm/yy",altFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,yearRange:"-100y:c+nn",maxDate:"-1d"}),jQuery("input.month").datepicker({dateFormat:"mm/yy",changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){function e(){return $("#ui-datepicker-div").html().indexOf("ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all ui-state-hover")>-1}if(e()){var t=$("#ui-datepicker-div .ui-datepicker-month :selected").val(),i=$("#ui-datepicker-div .ui-datepicker-year :selected").val();$(this).datepicker("setDate",new Date(i,t,1)).trigger("change"),$(".date-picker").focusout()}},beforeShow:function(){(datestr=$(this).val()).length>0&&(year=datestr.substring(datestr.length-4,datestr.length),month=datestr.substring(0,2),$(this).datepicker("option","defaultDate",new Date(year,month-1,1)),$(this).datepicker("setDate",new Date(year,month-1,1))),setTimeout(function(){$(".ui-datepicker-calendar").hide()},1)},onChangeMonthYear:function(){setTimeout(function(){$(".ui-datepicker-calendar").hide()},1)}})),jQuery("input.map").length){var n=[];google.load("maps","3",{other_params:"sensor=false&key="+$("input.map").data("key"),callback:function(){jQuery.each(jQuery("input.map"),function(){div=document.createElement("div"),div.style.width="600px",div.style.height="400px",this.parentNode.appendChild(div);var e=null;e=this.value?this.value.split(" "):[51.8100844,-.02911359999995966];var t=e[0],i=e[1],a=new google.maps.LatLng(t,i),r={zoom:7,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};if(n[this.name]=new google.maps.Map(div,r),n[this.name].markers=[],this.value||!$(this).prop("readonly")){n[this.name].markers.push(new google.maps.Marker({map:n[this.name],position:a,draggable:!0}));var o=this;google.maps.event.addListener(n[this.name].markers[0],"dragend",function(){var e=this.getPosition();o.value=e.lat()+" "+e.lng()})}if($(this).data("points")){var s=new google.maps.InfoWindow,d=$(this).data("points"),c=this.name;for(var u in d){var p=d[u];t=p.coords[0],i=p.coords[1],a=new google.maps.LatLng(t,i);var h=n[this.name].markers.push(new google.maps.Marker({map:n[this.name],position:a,title:p.title,description:p.description,icon:p.icon,link:p.link})),m=n[this.name].markers[h-1];google.maps.event.addListener(m,"click",function(e){return function(){s.setContent("<strong>"+e.title+"</strong><br>"+e.description+'<br><a href="'+e.link+'">read more</a>'),s.open(n[c],e)}}(m,u))}if($(this).data("results")){var y,g=n[this.name],f=n[this.name].markers,v=$("#"+$(this).data("results"));google.maps.event.addListener(g,"bounds_changed",function(){for(v.children().remove(),bounds=g.getBounds(),u=0,l=f.length;l>u;u++)y=f[u],bounds.contains(y.getPosition())&&0===$("#map-marker-"+u).length&&v.append($("<li />").attr("id","map-marker-"+u).attr("class","depot-result").html('<a href="#">'+y.title+"</a>").click($.proxy(function(){new google.maps.event.trigger(this,"click")},y)))})}}})}})}if(jQuery(".mapSearch").click(function(){e($(this).prev().val(),$(this).next().next().attr("name"))}),jQuery(".upload").length&&jQuery.getScript("/_lib/modules/phpupload/js/jquery.upload.js").done(function(){jQuery(".upload").upload()}),jQuery("select.rating").length){jQuery("head").append("<link>");var a=jQuery("head").children(":last");a.attr({rel:"stylesheet",type:"text/css",href:"/_lib/js/rateit/rateit.css"}),jQuery.getScript("/_lib/js/rateit/jquery.rateit.js").done(function(){$("select.rating").each(function(){var e=$(this);e.hide();var t=e.attr("data-rateit-starwidth")?e.attr("data-rateit-starwidth"):16,i=e.attr("data-rateit-starheight")?e.attr("data-rateit-starheight"):16,n=e.attr("class"),a=$(this).attr("disabled");e.after('<div class="'+n+'"></div>').next().rateit({backingfld:e.attr("id"),resetable:!1,ispreset:!0,step:1,value:e.val(),starwidth:t,starheight:i,readonly:a}).bind("rated",function(e,t){var i=$(this).prev();i.val(t),i.attr("data-section")&&jQuery.ajax("/_lib/cms/_ajax/rating.php",{dataType:"json",type:"post",data:{section:i.attr("data-section"),field:i.attr("name"),item:i.attr("data-item"),value:t}})})})})}var r="//cdn.tinymce.com/4/";jQuery("textarea.tinymce").length&&jQuery.getScript(r+"tinymce.min.js").done(function(){var e=$(this).data("css");tinymce.init({selector:"textarea.tinymce",script_url:r+"tinymce.min.js",plugins:["importcss advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste textcolor colorpicker hr"],toolbar:"insertfile undo redo | styleselect | formatselect  | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | hr link image forecolor backcolor | components",relative_urls:!1,remove_script_host:!1,content_css:e,template_external_list_url:"lists/template_list.js",external_link_list_url:"/_lib/js/tinymce.lists/links.php",external_image_list_url:"/_lib/js/tinymce.lists/images.php",media_external_list_url:"lists/media_list.js",file_picker_callback:function(e){tinymce.activeEditor.windowManager.open({title:"File browser",url:"/_lib/modules/phpupload/?field=field_name&file=url",width:800,height:600},{oninsert:function(t){e(t,{text:t})}})},accessibility_warnings:!1,popup_css:!1,theme_advanced_styles:"Link to Image=lightbox",extended_valid_elements:"[span[itemprop|itemtype|itemscope|class|style]",valid_elements:"*[*]",invalid_elements:"script",setup:function(e){e.addShortcut("Ctrl+219","","outdent"),e.addShortcut("Ctrl+221","","indent");var t=[];if("undefined"!=typeof components){for(var i in components)components.hasOwnProperty(i)&&t.push({text:components[i],value:"{$"+components[i]+"}",onclick:function(){e.insertContent(this._value)}});if(components.length){e.addButton("components",{type:"menubutton",text:"Components",icon:!1,menu:t})}}},paste_data_images:!0})}),jQuery("ul.files").length&&jQuery("ul.files").sortable(),jQuery("input.combo").length&&jQuery("input.combo").each(function(){jQuery(this).autocomplete({source:"_lib/cms/_ajax/autocomplete.php?field="+this.name})}),jQuery("div.chained").length&&jQuery("div.chained").each(function(){function e(t){if(Object.keys(t).length){r.children("select").removeAttr("name");var i=$('<select name="'+n+'" class="chained"></select>').appendTo(r),o=i.prev("select").val();i.append('<option value="'+o+'">Choose</option>'),$.each(t,function(t,n){var r=t==a||n.children?"selected":"";i.append('<option value="'+t+'" '+r+">"+n.value+"</option>"),n.children&&e(n.children)})}}function t(t,n){$.ajax({type:"GET",url:"/_lib/cms/_ajax/chained.php",data:{section:i,value:t,parent:n},success:function(t){e(t.options),n&&r.children("select").last().change()},dataType:"json"})}var i=$(this).data("section"),n=$(this).data("name"),a=$(this).data("value"),r=$(this);a?t(a,1):t(0),$("body").on("change","select.chained",function(){$(this).nextAll("select").remove(),$(this).attr("name",n);var e=$(this).val();e&&0!==$(this).find(":selected").index()&&t(e)})}),jQuery('input[type="file"]').length&&jQuery('input[type="file"]').change(function(e){for(var t,i=this,n=e.target.files,a=0;t=n[a];a++)if(t.type.match("video.*")){var r=new FileReader;r.onload=function(){return function(e){var t=document.createElement("video");t.style.display="none",t.src=e.target.result,i.parentNode.insertBefore(t,i.nextSibling),t.addEventListener("canplay",function(){this.currentTime=this.duration/2},!1),t.addEventListener("seeked",function(){var e=t.videoWidth,n=t.videoHeight,a=document.createElement("canvas");a.width=e,a.height=n;var r=a.getContext("2d");r.drawImage(t,0,0,e,n);var o=a.toDataURL("image/jpg"),s=document.createElement("textarea");s.style.display="none",i.parentNode.insertBefore(s,i.nextSibling),s.name="file_thumb",s.value=o,t.parentNode.removeChild(t)},!1)}}(t),r.readAsDataURL(t)}}),jQuery("span[data-id]").length&&jQuery.getScript(r+"jquery.tinymce.min.js").done(function(){var e=function(){$("#saveButton").attr("disabled","disabled");var e=[],t={};$("span[data-edited='true']").each(function(){t=$(this).data(),t.value=$(this).html(),e.push(t)}),$.ajax({type:"POST",url:"/_lib/cms/_ajax/save.php",data:{data:JSON.stringify(e)},success:function(){$("#saveDiv").remove()},dataType:"json"})},t=function(){$("#saveDiv").remove()},i=function(i){i.on("change",function(){if(i.bodyElement.dataset.edited=!0,!document.getElementById("saveDiv")){var n=document.createElement("div");n.id="saveDiv",n.style.position="fixed",n.style.bottom=0,n.style.left=0,n.style.right=0,n.style.zIndex=1e3,n.style.textAlign="center",n.style.background="#999",n.style.padding="3px";var a=document.createElement("BUTTON");a.id="saveButton",a.type="button",a.innerText="Save changes",a.style.margin="0px 5px",n.appendChild(a),a.onclick=e;var r=document.createElement("BUTTON");r.id="cancelButton",r.type="button",r.innerText="Cancel",r.style.margin="0px 5px",n.appendChild(r),r.onclick=t,document.body.appendChild(n)}})};$("span.cms_text").tinymce({script_url:r+"tinymce.min.js",selector:"span.cms_text",inline:!0,toolbar:"undo redo",menubar:!1,setup:i}),$("div.cms_editor").tinymce({script_url:r+"tinymce.min.js",selector:"div.cms_editor",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",setup:i})})}function numbersonly(e){var t=e.charCode?e.charCode:e.keyCode;return 8!==t&&46!==t&&9!==t&&(48>t||t>57)?!1:void 0}function addItem(e,t){phpUploadCallback=function(i){for(var n in i)if(i.hasOwnProperty(n)){var a=document.getElementById(e);li=document.createElement("li");var r='<input type="hidden" name="'+t+'[]" value="'+i[n]+'" size="5"> ';r+='<img src="_inc/modules/phpupload/?func=preview&file='+i[n]+'" width="100" height="100" /><br /> ',r+="<label>"+i[n]+"</label><br />",r+='<a href="javascript:void(0)" class="link" onClick="delItem(this)">Delete</a>',li.innerHTML=r,a.appendChild(li)}},phpUpload()}function delItem(e){var t=e.parentNode;t.parentNode.removeChild(t)}function clearItem(e){var t=document.getElementById(e),i=document.getElementById(e+"_thumb"),n=document.getElementById(e+"_label");t.value="",i.src="_inc/modules/phpupload/?func=preview&file=",n.innerHTML=""}function selectAll(e){jQuery("input").each(function(){this.name==e+"[]"&&(this.checked=!0)})}function selectNone(e){jQuery("input").each(function(){this.name==e+"[]"&&(this.checked=!1)})}function clearFile(e){var t=document.getElementById(e);inputFile=document.createElement("input"),inputFile.setAttribute("name",e),inputFile.setAttribute("type","file");for(var i=t.parentNode;i.childNodes.length>=1;)i.removeChild(i.firstChild);i.appendChild(inputFile)}function delRow(e){rows--,e.parentNode.parentNode.parentNode.deleteRow(e.parentNode.parentNode.rowIndex)}function init_tabs(){jQuery(".tab").each(function(e){0===e&&set_tab(this.target),jQuery(this).on("mousedown",function(e){set_tab(e.target.target)})})}function set_tab(e){jQuery(".tab").each(function(){e==this.target?(jQuery("#"+this.target).show(),jQuery(this).addClass("current")):(jQuery("#"+this.target).hide(),jQuery(this).removeClass("current"))})}!function(e){e.fn.serializeAll=function(){var t=/^(?:select|textarea)/i,i=/^(?:color|date|datetime|datetime-local|email|file|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,n=/\r?\n/g,a=this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||t.test(this.nodeName)||i.test(this.type))}).map(function(e,t){var i=jQuery(this).val();return null===i?null:jQuery.isArray(i)?jQuery.map(i,function(e){return{name:t.name,value:e.replace(n,"\r\n")}}):{name:t.name,value:i.replace(n,"\r\n")}}).get();return e.param(a)}}(jQuery),jQuery(document).ready(function(){initForms()}),$(document).ready(function(){$(".mob-nav-icon").click(function(){$(".content-wrapper").toggleClass("fullwidth"),$(".leftcol").toggleClass("nav-hdn")})});